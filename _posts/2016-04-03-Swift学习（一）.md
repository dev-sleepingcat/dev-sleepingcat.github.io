---
layout: post
title: Swift 学习（一）
---
{{ page.title }}
==================
<p class="meta">2016年4月3日 - 杭州</p>

> 引用：[http://wiki.jikexueyuan.com/project/swift/chapter1/02_a_swift_tour.html](http://wiki.jikexueyuan.com/project/swift/chapter1/02_a_swift_tour.html)

### 简单值

* 使用 let 声明常量；使用 var 声明变量；
* 如果初始值没有提供足够的信息（或者没有初始值）， 那么需要在变量的后面声明类型，用冒号分隔；
* 值永远不会被隐式转换为其他类型，如果需要把一个值转换成其他类型，请务必显示转换；
	
	有一种更简单的的方法把值转换成字符串：把值写到括号中，并且在括号之前写一个反斜杠：\\()

*  使用方括号[ ]来创建数组和字典，并使用下标或者键值来访问元素，最后一个元素后面允许有个逗号；

### 控制流

* 使用 if 和 switch 来进行条件操作，使用 for - in、for、while 和 repeat-while来进行循环操作；包裹条件和循环变量的括号可以省略，但是语句体的大括号是必须的。

	在 if 语句中，条件必须是一个布尔表达式。不会隐形的与 0 做比较。
	
* 一个可选的值是一个具体的值或者是nil以表示值缺失。在类型后面加一个问号来标记这个变量的值是可选的。

	如果变量的可选值为 nil， 则if语句中条件会判断为 false。

*  另一种处理可选值的方法是通过使用 ?? 操作符来提供一个默认值。如果可选值缺失的话，可以使用默认值代替。
*  switch 支持任意类型的数据以及各种比较操作， 不仅仅是整数。

	运行 switch 中匹配的子句后，程序会退出switch语句，并不会继续向下运行，所以不需要在每个子句后面添加break。
	
*  可以使用for - in 来遍历字典，需要两个变量来表示每个键值对。字典是一个无序的集合，所以他们的键值以任意顺序迭代结束。
*  使用 while 来重复运行一段代码直到条件不满足。循环条件也可以放在结尾，保证至少循环一次。
*  可以在循环中使用 ..< 来表示范围，也可以使用传统写法。注意使用 ..< 创建的范围不包含上界，如果想包含的话需要使用 ... 。

### 函数和闭包

* 使用 func 来声明一个函数，使用名字和参数来调用函数。使用 -> 来指定函数返回值的类型。

	使用元组来让一个函数返回多个值。该元组的元素可以用名称或者数字来表示。
	
	函数可以带有可变个数的参数，这些参数在函数内表现为数组的形式。
	
* 函数可以嵌套。被嵌套的函数可以访问外侧函数的变量。你可以使用一个嵌套函数来重构一个太长或者太复杂的函数。

	函数可以作为另一个函数的返回值；
	函数也可以作为参数传入另一个函数。
	
* 可以使用 {} 来创建一个匿名的闭包；使用 in 将参数和返回值类型声明与闭包函数体分离。

	你可以通过参数位置而不是参数名字来引用参数——这个方法在非常短的闭包中非常有用。当一个闭包作为最后一个参数传给一个函数的时候，它可以直接跟在括号后面。当一个闭包是传给函数的唯一参数，你可以完全忽略括号。
	
### 对象和类

* 使用 class 和类名来创建一个类。类中属性的声明和常量、变量声明一样，唯一的区别就是它们的上下文是类。同样，方法和函数声明也一样。
* 要创建一个类的实例，在类名后面加上括号；使用点语法来访问实例的属性和方法。
* 使用 init 来创建一个构造体；使用deinit 创建一个析构函数。
* 子类的定义方法是在它们的类名后面加上父类的名字，用冒号分割。子类如果要重写父类的方法的话，需要用override标记——如果没有添加override就重写父类方法的话编译器会报错。编译器同样会检测override标记的方法是否确实在父类中。
* 除了储存简单的属性之外，属性可以有 getter 和 setter 。
* 如果你不需要计算属性，但是仍然需要在设置一个新值之前或者之后运行代码，使用willSet和didSet
* 处理变量的可选值时，你可以在操作（比如方法、属性和子脚本）之前加?。如果?之前的值是nil，?后面的东西都会被忽略，并且整个表达式返回nil。否则，?之后的东西都会被运行。在这两种情况下，整个表达式的值也是一个可选值。

### 枚举和结构体

* 使用enum来创建一个枚举。就像类和其他所有命名类型一样，枚举可以包含方法。
* 枚举值的原始值可以使用整型、字符串或浮点数。使用rawValue属性来访问一个枚举成员的原始值。
* 使用init?(rawValue:)初始化构造器在原始值和枚举值之间进行转换。
* 使用struct来创建一个结构体。结构体和类有很多相同的地方，比如方法和构造器。它们之间最大的一个区别就是结构体是传值，类是传引用。
* 一个枚举成员的实例可以有实例值。相同枚举成员的实例可以有不同的值。创建实例的时候传入值即可。实例值和原始值是不同的：枚举成员的原始值对于所有实例都是相同的，而且你是在定义枚举的时候设置原始值。

### 协议和扩展

* 使用 protocol 声明一个协议。

	类、枚举和结构体都可以实现协议。
	
	枚举实现协议：[http://stackoverflow.com/questions/24011170/how-to-make-an-enum-conform-to-a-protocol-in-swift](http://stackoverflow.com/questions/24011170/how-to-make-an-enum-conform-to-a-protocol-in-swift) 
	
* 注意声明结构体的时候mutating关键字用来标记一个会修改结构体的方法。类的声明不需要标记任何方法，因为类中的方法通常可以修改类属性（类的性质）。
* 使用extension来为现有的类型添加功能，比如新的方法和计算属性。你可以使用扩展在别处修改定义，甚至是从外部库或者框架引入的一个类型，使得这个类型遵循某个协议

### 泛型

* 泛型相关知识：[http://zhangbuhuai.com/2015/05/14/Swift-Generics/](http://zhangbuhuai.com/2015/05/14/Swift-Generics/)，个人感觉写的相当不错，通俗易懂。